{% extends "base.html" %}
{% import "macros.html" as macro %}

{% block login %}
    {% if user: %}
        {{ macro.top_welcome(user) }}
    {% else: %}
        {{macro.top_login()}}
    {% endif %}
{% endblock %}

{% block script_src%}<script src="/static/js/custom/library_browse.js"></script>{%endblock%}

{% block content%}
  {{showBrowseNav()}}
  <div class="span9" id="browsed-title" >
    <div class="pull-right" style="margin-right:40px;margin-top:10px;">
      <i class="request-loading hidden" id="loading"></i>
      <img title="Error in fetching listings" src="/static/images/error.gif" class="hidden" id="load-error">
    </div>
    <h2><a href="javascript:void(0)"><img src="/static/images/list_icon.png" style="margin-top:-5px" title="Show Navigation" id="imgHide" onclick="showNav()" class="hidden"/></a> Showing {{ showing(q) }}</h2>
  </div>

  <div class="span8 well" id="browsed-div">
  </div>
  <div id="results-nav" class="span9 offset3">
    <div>
      <center><h3><small id="display-info">Showing 0-0 of 0</small></h3></center>
    </div>
    <div class="pagination pagination-centered" style="margin-top:0" >
      <ul id="pagination"></ul>
    </div>
  </div>
{% endblock %}

{% macro getDescription(desc) %}
  {% if desc.description %}{{description}}{%else%}No description available{%endif%}
{% endmacro%}

{% block jscript %}
  window.onload = requestLibrary(1);
{% endblock %}

{% macro advanceSearch() %}
  <div id="search-title" class="span4"><h2>Advance Search</h2></div>
  <div class="span8 well" id="advance-search">
    <form action="<search_action>" method="post" class="form-horizontal">
      <div class="control-group">
        <label class="control-label" for="title">Title</label>
        <div class="controls"> <input type="text" placeholder="Title" id="title"> </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="author">Author</label>
        <div class="controls"> <input type="text" placeholder="Author" id="author"> </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="subject">Subject</label>
        <div class="controls">  <input type="text" placeholder="Subject" id="subject"> </div>
      </div>
      <div class="control-group">
      </div>
    </form>
  </div>
{% endmacro %}

{% macro modTitle(title)%}
  {% if title[28]: %}{{title[:25]}}...{% else %}{{title}}{%endif%}
{% endmacro %}

{% macro showBrowseNav() %}
  <div id="browseNav">
  <div class="span3 well" style="padding:8px 0;">
      <ul class="nav nav-list">
        <li class="nav-header">Book<span class="pull-right"><a href="javascript:void(0)" onclick="hideNav()">hide</a></span></li>
        <li class="active"><a href="javascript:void(0)" onclick="">All</a></li>
        {#<li class="nav-header">Subjects</li>
        <li class><a href="javascript:void(0)" onclick="">Mathematics</a></li>
        <li class><a href="javascript:void(0)" onclick="">Science</a></li>
        <li class><a href="javascript:void(0)" onclick="">English</a></li>
        <li class><a href="javascript:void(0)" onclick="">Philisophy</a></li>#}
        <li class="divider"></li>
        <li class><a href="javascript:void(0)" onclick="">Advance Search</a></li>
      </ul>
  </div>
  </div>
{% endmacro %}

{% macro showing(q) %}
    {% if q=='lib':%}all books in library
    {% elif q=='buy':%}all books that are for sale
    {% elif q=='sell':%}all books with buy orders
    {% endif %}
{% endmacro %}
